import{useContext as t,createContext as e,useState as r,Children as n,createElement as o,useRef as i,useEffect as a,useMemo as u,useCallback as l,forwardRef as c,Fragment as p}from"react";import{or as f,attribute as y,equals as s,literal as g,association as d,empty as b,contains as v}from"mendix/filters/builders";class h extends Error{constructor(){super("Component is used out of context provider")}}class m extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Value is missing in context")}}function S(t){return{hasError:!0,error:t}}function w(t){return{hasError:!1,value:t}}var A;!function(t){t.STRING="string",t.NUMBER="number",t.ENUMERATION="enum",t.DATE="date",t.ASSOCIATION="association"}(A||(A={}));const j="com.mendix.widgets.web.filterable.filterContext";function O(){const r=function(){let t=window[j];return null==t&&(t=e(void 0),window[j]=t),t}(),n=t(r);return null==n?S(new h):w(n)}function P(){const[t]=r("DropdownFilter".concat(function(){const t="com.mendix.widgets.web.UUID";return window[t]||(window[t]=1),window[t]++}()));return t}class x extends Error{constructor(){super("The Drop-down filter widget must be placed inside the header of the Data grid 2.0 or Gallery widget.")}}class E extends Error{}class I extends Error{constructor(){super("The attribute type being used for Drop-down filter is not 'Boolean or Enumeration'.")}}const F=()=>new E("Can't find attribute: the attribute for filter is not configured or can't be found."),k=t=>new E("Invalid option (".concat(t||"Unknown","): option has invalid value and can't be used with attribute(s)")),M=()=>new E(["Missing required attribute(s):","the Drop-down filter widget can't be used with the filters options you have selected.","It requires a 'Boolean or Enumeration' attribute to be selected."].join(" "));function U(t){return/Enum|Boolean/.test(t)}function _(t){return t.universe?t.universe.map((e=>{var r,n;return{caption:null!==(r=t.formatter.format(e))&&void 0!==r?r:"",value:null!==(n=null==e?void 0:e.toString())&&void 0!==n?n:""}})):[]}function R(t,e){return"Boolean"===t?"true"!==e&&"false"!==e?e:"true"===e:e}function T(t,e){const r=e.find((e=>t.every((t=>function(t,e){var r;return!(null!==(r=t.universe)&&void 0!==r?r:[]).includes(R(t.type,e))}(t,e.value)))));if(r)return k(r.caption)}function N(t,e){if(!t||!t.filterable||0===e.length)return;const{id:r,type:n}=t,o=y(r),i=e.filter((e=>{var r;return null===(r=t.universe)||void 0===r?void 0:r.includes(R(t.type,e.value))})).map((t=>s(o,g(R(n,t.value)))));if(i.length>1)return f(...i);const[a]=i;return a}function C(t){var e;const{multipleAttributes:r}=t,n=null!==(e=function(t){if(t)return Object.keys(t).map((e=>t[e])).filter((t=>U(t.type)))}(r))&&void 0!==e?e:[];return 0===n.length?S(M()):w(n)}function B(t){return!!t.multipleAttributes?C(t):function(t){const{singleAttribute:e}=t;return void 0===e?S(F()):U(e.type)?w([e]):S(new I)}(t)}function D(t,e){var r;const{auto:n,filterOptions:o,ariaLabel:i,style:a,tabIndex:u,multiSelect:l,emptyOptionCaption:c,class:p,defaultValue:y}=e,s=B(t);if(s.hasError)return S(s.error);const g=function(t){const{autoOptions:e,attributes:r,customOptions:n}=t;if(e)return w(r.flatMap(_));const o=n.every((t=>{let{value:e,caption:r}=t;return"available"===e.status&&"available"===r.status})),i=o?n.map((t=>{var e,r;return{caption:null!==(e=t.caption.value)&&void 0!==e?e:"",value:null!==(r=t.value.value)&&void 0!==r?r:""}})):[],a=T(r,i);return a?S(a):w(i)}({autoOptions:n,customOptions:o,attributes:s.value});if(g.hasError)return S(g.error);const d=function(t,e,r){const{singleInitialFilter:n,multipleInitialFilters:o}=t,i=n?null==n?void 0:n.map((t=>t.value)).join(","):null==e?void 0:e.flatMap((t=>null==o?void 0:o[t.id].map((t=>t.value)))).join(",");return i||r}(t,s.value,null==y?void 0:y.value),b=function(t,e,r){return n=>{var o,i,a;const u=n.map((t=>t.value)).join(",");u!==((null===(o=r.valueAttribute)||void 0===o?void 0:o.value)||"")&&(null===(i=r.valueAttribute)||void 0===i||i.setValue(u),null===(a=r.onChange)||void 0===a||a.execute());const l=null==e?void 0:e.map((t=>N(t,n))).filter((t=>void 0!==t));t({getFilterCondition:()=>l&&l.length>1?f(...l):null==l?void 0:l[0],filterType:A.ENUMERATION})}}(t.filterDispatcher,s.value,e);return w({name:e.name,parentChannelName:null!==(r=t.eventsChannelName)&&void 0!==r?r:null,updateFilters:b,options:g.value,initialSelected:d,ariaLabel:null==i?void 0:i.value,className:p,emptyOptionCaption:null==c?void 0:c.value,multiSelect:l,styles:a,tabIndex:u})}var W="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function $(t){return t&&Object.prototype.hasOwnProperty.call(t,"default")&&1===Object.keys(t).length?t.default:t}var L,G={exports:{}};
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/L=G,function(){var t={}.hasOwnProperty;function e(){for(var r=[],n=0;n<arguments.length;n++){var o=arguments[n];if(o){var i=typeof o;if("string"===i||"number"===i)r.push(o);else if(Array.isArray(o)){if(o.length){var a=e.apply(null,o);a&&r.push(a)}}else if("object"===i){if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]")){r.push(o.toString());continue}for(var u in o)t.call(o,u)&&o[u]&&r.push(u)}}}return r.join(" ")}L.exports?(e.default=e,L.exports=e):window.classNames=e}();var V=G.exports;const q=t=>{let{className:e,bootstrapStyle:r,children:i,role:a}=t;return n.count(i)>0?o("div",{className:V("alert alert-".concat(r),e),role:a},i):null};function z(t){return o(q,{bootstrapStyle:"danger"},"Error: ",t.error.message)}q.displayName="Alert";var H,J,Z=Object.prototype.toString,K=function(t){var e=Z.call(t),r="[object Arguments]"===e;return r||(r="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===Z.call(t.callee)),r};var Y=Array.prototype.slice,X=K,Q=Object.keys,tt=Q?function(t){return Q(t)}:function(){if(J)return H;var t;if(J=1,!Object.keys){var e=Object.prototype.hasOwnProperty,r=Object.prototype.toString,n=K,o=Object.prototype.propertyIsEnumerable,i=!o.call({toString:null},"toString"),a=o.call((function(){}),"prototype"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],l=function(t){var e=t.constructor;return e&&e.prototype===t},c={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!c["$"+t]&&e.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{l(window[t])}catch(t){return!0}}catch(t){return!0}return!1}();t=function(t){var o=null!==t&&"object"==typeof t,c="[object Function]"===r.call(t),f=n(t),y=o&&"[object String]"===r.call(t),s=[];if(!o&&!c&&!f)throw new TypeError("Object.keys called on a non-object");var g=a&&c;if(y&&t.length>0&&!e.call(t,0))for(var d=0;d<t.length;++d)s.push(String(d));if(f&&t.length>0)for(var b=0;b<t.length;++b)s.push(String(b));else for(var v in t)g&&"prototype"===v||!e.call(t,v)||s.push(String(v));if(i)for(var h=function(t){if("undefined"==typeof window||!p)return l(t);try{return l(t)}catch(t){return!1}}(t),m=0;m<u.length;++m)h&&"constructor"===u[m]||!e.call(t,u[m])||s.push(u[m]);return s}}return H=t}(),et=Object.keys;tt.shim=function(){if(Object.keys){var t=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);t||(Object.keys=function(t){return X(t)?et(Y.call(t)):et(t)})}else Object.keys=tt;return Object.keys||tt};var rt,nt,ot=tt,it=Error,at=EvalError,ut=RangeError,lt=ReferenceError,ct=SyntaxError,pt=TypeError,ft=URIError;function yt(){return nt?rt:(nt=1,rt=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),r=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var n=Object.getOwnPropertySymbols(t);if(1!==n.length||n[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(t,e);if(42!==o.value||!0!==o.enumerable)return!1}return!0})}var st,gt="undefined"!=typeof Symbol&&Symbol,dt=yt(),bt=function(){return"function"==typeof gt&&("function"==typeof Symbol&&("symbol"==typeof gt("foo")&&("symbol"==typeof Symbol("bar")&&dt())))},vt={__proto__:null,foo:{}},ht=Object,mt=Object.prototype.toString,St=Math.max,wt=function(t,e){for(var r=[],n=0;n<t.length;n+=1)r[n]=t[n];for(var o=0;o<e.length;o+=1)r[o+t.length]=e[o];return r},At=function(t){var e=this;if("function"!=typeof e||"[object Function]"!==mt.apply(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var r,n=function(t,e){for(var r=[],n=e||0,o=0;n<t.length;n+=1,o+=1)r[o]=t[n];return r}(arguments,1),o=St(0,e.length-n.length),i=[],a=0;a<o;a++)i[a]="$"+a;if(r=Function("binder","return function ("+function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r}(i,",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof r){var o=e.apply(this,wt(n,arguments));return Object(o)===o?o:this}return e.apply(t,wt(n,arguments))})),e.prototype){var u=function(){};u.prototype=e.prototype,r.prototype=new u,u.prototype=null}return r},jt=Function.prototype.bind||At,Ot=Function.prototype.call,Pt=Object.prototype.hasOwnProperty,xt=jt.call(Ot,Pt),Et=it,It=at,Ft=ut,kt=lt,Mt=ct,Ut=pt,_t=ft,Rt=Function,Tt=function(t){try{return Rt('"use strict"; return ('+t+").constructor;")()}catch(t){}},Nt=Object.getOwnPropertyDescriptor;if(Nt)try{Nt({},"")}catch(t){Nt=null}var Ct=function(){throw new Ut},Bt=Nt?function(){try{return Ct}catch(t){try{return Nt(arguments,"callee").get}catch(t){return Ct}}}():Ct,Dt=bt(),Wt={__proto__:vt}.foo===vt.foo&&!(vt instanceof ht),$t=Object.getPrototypeOf||(Wt?function(t){return t.__proto__}:null),Lt={},Gt="undefined"!=typeof Uint8Array&&$t?$t(Uint8Array):st,Vt={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?st:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?st:ArrayBuffer,"%ArrayIteratorPrototype%":Dt&&$t?$t([][Symbol.iterator]()):st,"%AsyncFromSyncIteratorPrototype%":st,"%AsyncFunction%":Lt,"%AsyncGenerator%":Lt,"%AsyncGeneratorFunction%":Lt,"%AsyncIteratorPrototype%":Lt,"%Atomics%":"undefined"==typeof Atomics?st:Atomics,"%BigInt%":"undefined"==typeof BigInt?st:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?st:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?st:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?st:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Et,"%eval%":eval,"%EvalError%":It,"%Float32Array%":"undefined"==typeof Float32Array?st:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?st:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?st:FinalizationRegistry,"%Function%":Rt,"%GeneratorFunction%":Lt,"%Int8Array%":"undefined"==typeof Int8Array?st:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?st:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?st:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Dt&&$t?$t($t([][Symbol.iterator]())):st,"%JSON%":"object"==typeof JSON?JSON:st,"%Map%":"undefined"==typeof Map?st:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&Dt&&$t?$t((new Map)[Symbol.iterator]()):st,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?st:Promise,"%Proxy%":"undefined"==typeof Proxy?st:Proxy,"%RangeError%":Ft,"%ReferenceError%":kt,"%Reflect%":"undefined"==typeof Reflect?st:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?st:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&Dt&&$t?$t((new Set)[Symbol.iterator]()):st,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?st:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Dt&&$t?$t(""[Symbol.iterator]()):st,"%Symbol%":Dt?Symbol:st,"%SyntaxError%":Mt,"%ThrowTypeError%":Bt,"%TypedArray%":Gt,"%TypeError%":Ut,"%Uint8Array%":"undefined"==typeof Uint8Array?st:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?st:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?st:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?st:Uint32Array,"%URIError%":_t,"%WeakMap%":"undefined"==typeof WeakMap?st:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?st:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?st:WeakSet};if($t)try{null.error}catch(t){var qt=$t($t(t));Vt["%Error.prototype%"]=qt}var zt=function t(e){var r;if("%AsyncFunction%"===e)r=Tt("async function () {}");else if("%GeneratorFunction%"===e)r=Tt("function* () {}");else if("%AsyncGeneratorFunction%"===e)r=Tt("async function* () {}");else if("%AsyncGenerator%"===e){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===e){var o=t("%AsyncGenerator%");o&&$t&&(r=$t(o.prototype))}return Vt[e]=r,r},Ht={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Jt=jt,Zt=xt,Kt=Jt.call(Function.call,Array.prototype.concat),Yt=Jt.call(Function.apply,Array.prototype.splice),Xt=Jt.call(Function.call,String.prototype.replace),Qt=Jt.call(Function.call,String.prototype.slice),te=Jt.call(Function.call,RegExp.prototype.exec),ee=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,re=/\\(\\)?/g,ne=function(t,e){var r,n=t;if(Zt(Ht,n)&&(n="%"+(r=Ht[n])[0]+"%"),Zt(Vt,n)){var o=Vt[n];if(o===Lt&&(o=zt(n)),void 0===o&&!e)throw new Ut("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new Mt("intrinsic "+t+" does not exist!")},oe=function(t,e){if("string"!=typeof t||0===t.length)throw new Ut("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new Ut('"allowMissing" argument must be a boolean');if(null===te(/^%?[^%]*%?$/,t))throw new Mt("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(t){var e=Qt(t,0,1),r=Qt(t,-1);if("%"===e&&"%"!==r)throw new Mt("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==e)throw new Mt("invalid intrinsic syntax, expected opening `%`");var n=[];return Xt(t,ee,(function(t,e,r,o){n[n.length]=r?Xt(o,re,"$1"):e||t})),n}(t),n=r.length>0?r[0]:"",o=ne("%"+n+"%",e),i=o.name,a=o.value,u=!1,l=o.alias;l&&(n=l[0],Yt(r,Kt([0,1],l)));for(var c=1,p=!0;c<r.length;c+=1){var f=r[c],y=Qt(f,0,1),s=Qt(f,-1);if(('"'===y||"'"===y||"`"===y||'"'===s||"'"===s||"`"===s)&&y!==s)throw new Mt("property names with quotes must have matching quotes");if("constructor"!==f&&p||(u=!0),Zt(Vt,i="%"+(n+="."+f)+"%"))a=Vt[i];else if(null!=a){if(!(f in a)){if(!e)throw new Ut("base intrinsic for "+t+" exists, but the property is not available.");return}if(Nt&&c+1>=r.length){var g=Nt(a,f);a=(p=!!g)&&"get"in g&&!("originalValue"in g.get)?g.get:a[f]}else p=Zt(a,f),a=a[f];p&&!u&&(Vt[i]=a)}}return a},ie=oe("%Object.defineProperty%",!0)||!1;if(ie)try{ie({},"a",{value:1})}catch(t){ie=!1}var ae=ie,ue=oe("%Object.getOwnPropertyDescriptor%",!0);if(ue)try{ue([],"length")}catch(t){ue=null}var le=ue,ce=ae,pe=ct,fe=pt,ye=le,se=function(t,e,r){if(!t||"object"!=typeof t&&"function"!=typeof t)throw new fe("`obj` must be an object or a function`");if("string"!=typeof e&&"symbol"!=typeof e)throw new fe("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new fe("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new fe("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new fe("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new fe("`loose`, if provided, must be a boolean");var n=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,i=arguments.length>5?arguments[5]:null,a=arguments.length>6&&arguments[6],u=!!ye&&ye(t,e);if(ce)ce(t,e,{configurable:null===i&&u?u.configurable:!i,enumerable:null===n&&u?u.enumerable:!n,value:r,writable:null===o&&u?u.writable:!o});else{if(!a&&(n||o||i))throw new pe("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");t[e]=r}},ge=ae,de=function(){return!!ge};de.hasArrayLengthDefineBug=function(){if(!ge)return null;try{return 1!==ge([],"length",{value:1}).length}catch(t){return!0}};var be=de,ve=ot,he="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),me=Object.prototype.toString,Se=Array.prototype.concat,we=se,Ae=be(),je=function(t,e,r,n){if(e in t)if(!0===n){if(t[e]===r)return}else if("function"!=typeof(o=n)||"[object Function]"!==me.call(o)||!n())return;var o;Ae?we(t,e,r,!0):we(t,e,r)},Oe=function(t,e){var r=arguments.length>2?arguments[2]:{},n=ve(e);he&&(n=Se.call(n,Object.getOwnPropertySymbols(e)));for(var o=0;o<n.length;o+=1)je(t,n[o],e[n[o]],r[n[o]])};Oe.supportsDescriptors=!!Ae;var Pe,xe=Oe,Ee={exports:{}},Ie={foo:{}},Fe=Object,ke=Function.prototype.call,Me=Object.prototype.hasOwnProperty,Ue=jt.call(ke,Me),_e=SyntaxError,Re=Function,Te=TypeError,Ne=function(t){try{return Re('"use strict"; return ('+t+").constructor;")()}catch(t){}},Ce=Object.getOwnPropertyDescriptor;if(Ce)try{Ce({},"")}catch(t){Ce=null}var Be=function(){throw new Te},De=Ce?function(){try{return Be}catch(t){try{return Ce(arguments,"callee").get}catch(t){return Be}}}():Be,We=bt(),$e={__proto__:Ie}.foo===Ie.foo&&!({__proto__:null}instanceof Fe),Le=Object.getPrototypeOf||($e?function(t){return t.__proto__}:null),Ge={},Ve="undefined"!=typeof Uint8Array&&Le?Le(Uint8Array):Pe,qe={"%AggregateError%":"undefined"==typeof AggregateError?Pe:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?Pe:ArrayBuffer,"%ArrayIteratorPrototype%":We&&Le?Le([][Symbol.iterator]()):Pe,"%AsyncFromSyncIteratorPrototype%":Pe,"%AsyncFunction%":Ge,"%AsyncGenerator%":Ge,"%AsyncGeneratorFunction%":Ge,"%AsyncIteratorPrototype%":Ge,"%Atomics%":"undefined"==typeof Atomics?Pe:Atomics,"%BigInt%":"undefined"==typeof BigInt?Pe:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?Pe:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?Pe:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?Pe:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?Pe:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?Pe:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?Pe:FinalizationRegistry,"%Function%":Re,"%GeneratorFunction%":Ge,"%Int8Array%":"undefined"==typeof Int8Array?Pe:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?Pe:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?Pe:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":We&&Le?Le(Le([][Symbol.iterator]())):Pe,"%JSON%":"object"==typeof JSON?JSON:Pe,"%Map%":"undefined"==typeof Map?Pe:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&We&&Le?Le((new Map)[Symbol.iterator]()):Pe,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?Pe:Promise,"%Proxy%":"undefined"==typeof Proxy?Pe:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?Pe:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?Pe:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&We&&Le?Le((new Set)[Symbol.iterator]()):Pe,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?Pe:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":We&&Le?Le(""[Symbol.iterator]()):Pe,"%Symbol%":We?Symbol:Pe,"%SyntaxError%":_e,"%ThrowTypeError%":De,"%TypedArray%":Ve,"%TypeError%":Te,"%Uint8Array%":"undefined"==typeof Uint8Array?Pe:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?Pe:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?Pe:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?Pe:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?Pe:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?Pe:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?Pe:WeakSet};if(Le)try{null.error}catch(t){var ze=Le(Le(t));qe["%Error.prototype%"]=ze}var He=function t(e){var r;if("%AsyncFunction%"===e)r=Ne("async function () {}");else if("%GeneratorFunction%"===e)r=Ne("function* () {}");else if("%AsyncGeneratorFunction%"===e)r=Ne("async function* () {}");else if("%AsyncGenerator%"===e){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===e){var o=t("%AsyncGenerator%");o&&Le&&(r=Le(o.prototype))}return qe[e]=r,r},Je={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ze=jt,Ke=Ue,Ye=Ze.call(Function.call,Array.prototype.concat),Xe=Ze.call(Function.apply,Array.prototype.splice),Qe=Ze.call(Function.call,String.prototype.replace),tr=Ze.call(Function.call,String.prototype.slice),er=Ze.call(Function.call,RegExp.prototype.exec),rr=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,nr=/\\(\\)?/g,or=function(t,e){var r,n=t;if(Ke(Je,n)&&(n="%"+(r=Je[n])[0]+"%"),Ke(qe,n)){var o=qe[n];if(o===Ge&&(o=He(n)),void 0===o&&!e)throw new Te("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new _e("intrinsic "+t+" does not exist!")},ir=function(t,e){if("string"!=typeof t||0===t.length)throw new Te("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new Te('"allowMissing" argument must be a boolean');if(null===er(/^%?[^%]*%?$/,t))throw new _e("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(t){var e=tr(t,0,1),r=tr(t,-1);if("%"===e&&"%"!==r)throw new _e("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==e)throw new _e("invalid intrinsic syntax, expected opening `%`");var n=[];return Qe(t,rr,(function(t,e,r,o){n[n.length]=r?Qe(o,nr,"$1"):e||t})),n}(t),n=r.length>0?r[0]:"",o=or("%"+n+"%",e),i=o.name,a=o.value,u=!1,l=o.alias;l&&(n=l[0],Xe(r,Ye([0,1],l)));for(var c=1,p=!0;c<r.length;c+=1){var f=r[c],y=tr(f,0,1),s=tr(f,-1);if(('"'===y||"'"===y||"`"===y||'"'===s||"'"===s||"`"===s)&&y!==s)throw new _e("property names with quotes must have matching quotes");if("constructor"!==f&&p||(u=!0),Ke(qe,i="%"+(n+="."+f)+"%"))a=qe[i];else if(null!=a){if(!(f in a)){if(!e)throw new Te("base intrinsic for "+t+" exists, but the property is not available.");return}if(Ce&&c+1>=r.length){var g=Ce(a,f);a=(p=!!g)&&"get"in g&&!("originalValue"in g.get)?g.get:a[f]}else p=Ke(a,f),a=a[f];p&&!u&&(qe[i]=a)}}return a},ar=oe,ur=se,lr=be(),cr=le,pr=ar("%TypeError%"),fr=ar("%Math.floor%"),yr=function(t,e){if("function"!=typeof t)throw new pr("`fn` is not a function");if("number"!=typeof e||e<0||e>4294967295||fr(e)!==e)throw new pr("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],n=!0,o=!0;if("length"in t&&cr){var i=cr(t,"length");i&&!i.configurable&&(n=!1),i&&!i.writable&&(o=!1)}return(n||o||!r)&&(lr?ur(t,"length",e,!0,!0):ur(t,"length",e)),t};!function(t){var e=jt,r=ir,n=yr,o=r("%TypeError%"),i=r("%Function.prototype.apply%"),a=r("%Function.prototype.call%"),u=r("%Reflect.apply%",!0)||e.call(a,i),l=r("%Object.defineProperty%",!0),c=r("%Math.max%");if(l)try{l({},"a",{value:1})}catch(t){l=null}t.exports=function(t){if("function"!=typeof t)throw new o("a function is required");var r=u(e,a,arguments);return n(r,1+c(0,t.length-(arguments.length-1)),!0)};var p=function(){return u(e,i,arguments)};l?l(t.exports,"apply",{value:p}):t.exports.apply=p}(Ee);var sr=ir,gr=Ee.exports,dr=gr(sr("String.prototype.indexOf")),br=function(t,e){var r=sr(t,!!e);return"function"==typeof r&&dr(t,".prototype.")>-1?gr(r):r},vr=ot,hr=yt()(),mr=br,Sr=Object,wr=mr("Array.prototype.push"),Ar=mr("Object.prototype.propertyIsEnumerable"),jr=hr?Object.getOwnPropertySymbols:null,Or=function(t,e){if(null==t)throw new TypeError("target must be an object");var r=Sr(t);if(1===arguments.length)return r;for(var n=1;n<arguments.length;++n){var o=Sr(arguments[n]),i=vr(o),a=hr&&(Object.getOwnPropertySymbols||jr);if(a)for(var u=a(o),l=0;l<u.length;++l){var c=u[l];Ar(o,c)&&wr(i,c)}for(var p=0;p<i.length;++p){var f=i[p];if(Ar(o,f)){var y=o[f];r[f]=y}}}return r},Pr=Or,xr=function(){return Object.assign?function(){if(!Object.assign)return!1;for(var t="abcdefghijklmnopqrst",e=t.split(""),r={},n=0;n<e.length;++n)r[e[n]]=e[n];var o=Object.assign({},r),i="";for(var a in o)i+=a;return t!==i}()||function(){if(!Object.assign||!Object.preventExtensions)return!1;var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch(e){return"y"===t[1]}return!1}()?Pr:Object.assign:Pr},Er=xe,Ir=xr,Fr=xe,kr=Or,Mr=xr,Ur=function(){var t=Ir();return Er(Object,{assign:t},{assign:function(){return Object.assign!==t}}),t},_r=Ee.exports.apply(Mr()),Rr=function(t,e){return _r(Object,arguments)};Fr(Rr,{getPolyfill:Mr,implementation:kr,shim:Ur});var Tr=Rr,Nr=function(){return"string"==typeof function(){}.name},Cr=Object.getOwnPropertyDescriptor;if(Cr)try{Cr([],"length")}catch(t){Cr=null}Nr.functionsHaveConfigurableNames=function(){if(!Nr()||!Cr)return!1;var t=Cr((function(){}),"name");return!!t&&!!t.configurable};var Br=Function.prototype.bind;Nr.boundFunctionsHaveNames=function(){return Nr()&&"function"==typeof Br&&""!==function(){}.bind().name};var Dr=Nr,Wr=se,$r=be(),Lr=Dr.functionsHaveConfigurableNames(),Gr=TypeError,Vr=Object,qr=TypeError,zr=function(t,e){if("function"!=typeof t)throw new Gr("`fn` is not a function");return arguments.length>2&&!!arguments[2]&&!Lr||($r?Wr(t,"name",e,!0,!0):Wr(t,"name",e)),t}((function(){if(null!=this&&this!==Vr(this))throw new qr("RegExp.prototype.flags getter called on non-object");var t="";return this.hasIndices&&(t+="d"),this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.unicodeSets&&(t+="v"),this.sticky&&(t+="y"),t}),"get flags",!0),Hr=zr,Jr=xe.supportsDescriptors,Zr=Object.getOwnPropertyDescriptor,Kr=function(){if(Jr&&"gim"===/a/gim.flags){var t=Zr(RegExp.prototype,"flags");if(t&&"function"==typeof t.get&&"boolean"==typeof RegExp.prototype.dotAll&&"boolean"==typeof RegExp.prototype.hasIndices){var e="",r={};if(Object.defineProperty(r,"hasIndices",{get:function(){e+="d"}}),Object.defineProperty(r,"sticky",{get:function(){e+="y"}}),"dy"===e)return t.get}}return Hr},Yr=xe.supportsDescriptors,Xr=Kr,Qr=Object.getOwnPropertyDescriptor,tn=Object.defineProperty,en=TypeError,rn=Object.getPrototypeOf,nn=/a/,on=xe,an=zr,un=Kr,ln=function(){if(!Yr||!rn)throw new en("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=Xr(),e=rn(nn),r=Qr(e,"flags");return r&&r.get===t||tn(e,"flags",{configurable:!0,enumerable:!1,get:t}),t},cn=(0,Ee.exports)(un());on(cn,{getPolyfill:un,implementation:an,shim:ln});var pn=cn,fn={exports:{}},yn=yt(),sn=function(){return yn()&&!!Symbol.toStringTag},gn=sn(),dn=br("Object.prototype.toString"),bn=function(t){return!(gn&&t&&"object"==typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===dn(t)},vn=function(t){return!!bn(t)||null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==dn(t)&&"[object Function]"===dn(t.callee)},hn=function(){return bn(arguments)}();bn.isLegacyArguments=vn;var mn=hn?bn:vn,Sn=$(Object.freeze({__proto__:null,default:{}})),wn="function"==typeof Map&&Map.prototype,An=Object.getOwnPropertyDescriptor&&wn?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,jn=wn&&An&&"function"==typeof An.get?An.get:null,On=wn&&Map.prototype.forEach,Pn="function"==typeof Set&&Set.prototype,xn=Object.getOwnPropertyDescriptor&&Pn?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,En=Pn&&xn&&"function"==typeof xn.get?xn.get:null,In=Pn&&Set.prototype.forEach,Fn="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,kn="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,Mn="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,Un=Boolean.prototype.valueOf,_n=Object.prototype.toString,Rn=Function.prototype.toString,Tn=String.prototype.match,Nn=String.prototype.slice,Cn=String.prototype.replace,Bn=String.prototype.toUpperCase,Dn=String.prototype.toLowerCase,Wn=RegExp.prototype.test,$n=Array.prototype.concat,Ln=Array.prototype.join,Gn=Array.prototype.slice,Vn=Math.floor,qn="function"==typeof BigInt?BigInt.prototype.valueOf:null,zn=Object.getOwnPropertySymbols,Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,Jn="function"==typeof Symbol&&"object"==typeof Symbol.iterator,Zn="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Jn||"symbol")?Symbol.toStringTag:null,Kn=Object.prototype.propertyIsEnumerable,Yn=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function Xn(t,e){if(t===1/0||t===-1/0||t!=t||t&&t>-1e3&&t<1e3||Wn.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof t){var n=t<0?-Vn(-t):Vn(t);if(n!==t){var o=String(n),i=Nn.call(e,o.length+1);return Cn.call(o,r,"$&_")+"."+Cn.call(Cn.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Cn.call(e,r,"$&_")}var Qn=Sn,to=Qn.custom,eo=ao(to)?to:null;function ro(t,e,r){var n="double"===(r.quoteStyle||e)?'"':"'";return n+t+n}function no(t){return Cn.call(String(t),/"/g,"&quot;")}function oo(t){return!("[object Array]"!==co(t)||Zn&&"object"==typeof t&&Zn in t)}function io(t){return!("[object RegExp]"!==co(t)||Zn&&"object"==typeof t&&Zn in t)}function ao(t){if(Jn)return t&&"object"==typeof t&&t instanceof Symbol;if("symbol"==typeof t)return!0;if(!t||"object"!=typeof t||!Hn)return!1;try{return Hn.call(t),!0}catch(t){}return!1}var uo=Object.prototype.hasOwnProperty||function(t){return t in this};function lo(t,e){return uo.call(t,e)}function co(t){return _n.call(t)}function po(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function fo(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return fo(Nn.call(t,0,e.maxStringLength),e)+n}return ro(Cn.call(Cn.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,yo),"single",e)}function yo(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+Bn.call(e.toString(16))}function so(t){return"Object("+t+")"}function go(t){return t+" { ? }"}function bo(t,e,r,n){return t+" ("+e+") {"+(n?vo(r,n):Ln.call(r,", "))+"}"}function vo(t,e){if(0===t.length)return"";var r="\n"+e.prev+e.base;return r+Ln.call(t,","+r)+"\n"+e.prev}function ho(t,e){var r=oo(t),n=[];if(r){n.length=t.length;for(var o=0;o<t.length;o++)n[o]=lo(t,o)?e(t[o],t):""}var i,a="function"==typeof zn?zn(t):[];if(Jn){i={};for(var u=0;u<a.length;u++)i["$"+a[u]]=a[u]}for(var l in t)lo(t,l)&&(r&&String(Number(l))===l&&l<t.length||Jn&&i["$"+l]instanceof Symbol||(Wn.call(/[^\w$]/,l)?n.push(e(l,t)+": "+e(t[l],t)):n.push(l+": "+e(t[l],t))));if("function"==typeof zn)for(var c=0;c<a.length;c++)Kn.call(t,a[c])&&n.push("["+e(a[c])+"]: "+e(t[a[c]],t));return n}var mo=ir,So=br,wo=function t(e,r,n,o){var i=r||{};if(lo(i,"quoteStyle")&&"single"!==i.quoteStyle&&"double"!==i.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(lo(i,"maxStringLength")&&("number"==typeof i.maxStringLength?i.maxStringLength<0&&i.maxStringLength!==1/0:null!==i.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=!lo(i,"customInspect")||i.customInspect;if("boolean"!=typeof a&&"symbol"!==a)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(lo(i,"indent")&&null!==i.indent&&"\t"!==i.indent&&!(parseInt(i.indent,10)===i.indent&&i.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(lo(i,"numericSeparator")&&"boolean"!=typeof i.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var u=i.numericSeparator;if(void 0===e)return"undefined";if(null===e)return"null";if("boolean"==typeof e)return e?"true":"false";if("string"==typeof e)return fo(e,i);if("number"==typeof e){if(0===e)return 1/0/e>0?"0":"-0";var l=String(e);return u?Xn(e,l):l}if("bigint"==typeof e){var c=String(e)+"n";return u?Xn(e,c):c}var p=void 0===i.depth?5:i.depth;if(void 0===n&&(n=0),n>=p&&p>0&&"object"==typeof e)return oo(e)?"[Array]":"[Object]";var f=function(t,e){var r;if("\t"===t.indent)r="\t";else{if(!("number"==typeof t.indent&&t.indent>0))return null;r=Ln.call(Array(t.indent+1)," ")}return{base:r,prev:Ln.call(Array(e+1),r)}}(i,n);if(void 0===o)o=[];else if(po(o,e)>=0)return"[Circular]";function y(e,r,a){if(r&&(o=Gn.call(o)).push(r),a){var u={depth:i.depth};return lo(i,"quoteStyle")&&(u.quoteStyle=i.quoteStyle),t(e,u,n+1,o)}return t(e,i,n+1,o)}if("function"==typeof e&&!io(e)){var s=function(t){if(t.name)return t.name;var e=Tn.call(Rn.call(t),/^function\s*([\w$]+)/);if(e)return e[1];return null}(e),g=ho(e,y);return"[Function"+(s?": "+s:" (anonymous)")+"]"+(g.length>0?" { "+Ln.call(g,", ")+" }":"")}if(ao(e)){var d=Jn?Cn.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):Hn.call(e);return"object"!=typeof e||Jn?d:so(d)}if(function(t){if(!t||"object"!=typeof t)return!1;if("undefined"!=typeof HTMLElement&&t instanceof HTMLElement)return!0;return"string"==typeof t.nodeName&&"function"==typeof t.getAttribute}(e)){for(var b="<"+Dn.call(String(e.nodeName)),v=e.attributes||[],h=0;h<v.length;h++)b+=" "+v[h].name+"="+ro(no(v[h].value),"double",i);return b+=">",e.childNodes&&e.childNodes.length&&(b+="..."),b+="</"+Dn.call(String(e.nodeName))+">"}if(oo(e)){if(0===e.length)return"[]";var m=ho(e,y);return f&&!function(t){for(var e=0;e<t.length;e++)if(po(t[e],"\n")>=0)return!1;return!0}(m)?"["+vo(m,f)+"]":"[ "+Ln.call(m,", ")+" ]"}if(function(t){return!("[object Error]"!==co(t)||Zn&&"object"==typeof t&&Zn in t)}(e)){var S=ho(e,y);return"cause"in Error.prototype||!("cause"in e)||Kn.call(e,"cause")?0===S.length?"["+String(e)+"]":"{ ["+String(e)+"] "+Ln.call(S,", ")+" }":"{ ["+String(e)+"] "+Ln.call($n.call("[cause]: "+y(e.cause),S),", ")+" }"}if("object"==typeof e&&a){if(eo&&"function"==typeof e[eo]&&Qn)return Qn(e,{depth:p-n});if("symbol"!==a&&"function"==typeof e.inspect)return e.inspect()}if(function(t){if(!jn||!t||"object"!=typeof t)return!1;try{jn.call(t);try{En.call(t)}catch(t){return!0}return t instanceof Map}catch(t){}return!1}(e)){var w=[];return On&&On.call(e,(function(t,r){w.push(y(r,e,!0)+" => "+y(t,e))})),bo("Map",jn.call(e),w,f)}if(function(t){if(!En||!t||"object"!=typeof t)return!1;try{En.call(t);try{jn.call(t)}catch(t){return!0}return t instanceof Set}catch(t){}return!1}(e)){var A=[];return In&&In.call(e,(function(t){A.push(y(t,e))})),bo("Set",En.call(e),A,f)}if(function(t){if(!Fn||!t||"object"!=typeof t)return!1;try{Fn.call(t,Fn);try{kn.call(t,kn)}catch(t){return!0}return t instanceof WeakMap}catch(t){}return!1}(e))return go("WeakMap");if(function(t){if(!kn||!t||"object"!=typeof t)return!1;try{kn.call(t,kn);try{Fn.call(t,Fn)}catch(t){return!0}return t instanceof WeakSet}catch(t){}return!1}(e))return go("WeakSet");if(function(t){if(!Mn||!t||"object"!=typeof t)return!1;try{return Mn.call(t),!0}catch(t){}return!1}(e))return go("WeakRef");if(function(t){return!("[object Number]"!==co(t)||Zn&&"object"==typeof t&&Zn in t)}(e))return so(y(Number(e)));if(function(t){if(!t||"object"!=typeof t||!qn)return!1;try{return qn.call(t),!0}catch(t){}return!1}(e))return so(y(qn.call(e)));if(function(t){return!("[object Boolean]"!==co(t)||Zn&&"object"==typeof t&&Zn in t)}(e))return so(Un.call(e));if(function(t){return!("[object String]"!==co(t)||Zn&&"object"==typeof t&&Zn in t)}(e))return so(y(String(e)));if("undefined"!=typeof window&&e===window)return"{ [object Window] }";if(e===W)return"{ [object globalThis] }";if(!function(t){return!("[object Date]"!==co(t)||Zn&&"object"==typeof t&&Zn in t)}(e)&&!io(e)){var j=ho(e,y),O=Yn?Yn(e)===Object.prototype:e instanceof Object||e.constructor===Object,P=e instanceof Object?"":"null prototype",x=!O&&Zn&&Object(e)===e&&Zn in e?Nn.call(co(e),8,-1):P?"Object":"",E=(O||"function"!=typeof e.constructor?"":e.constructor.name?e.constructor.name+" ":"")+(x||P?"["+Ln.call($n.call([],x||[],P||[]),": ")+"] ":"");return 0===j.length?E+"{}":f?E+"{"+vo(j,f)+"}":E+"{ "+Ln.call(j,", ")+" }"}return String(e)},Ao=mo("%TypeError%"),jo=mo("%WeakMap%",!0),Oo=mo("%Map%",!0),Po=So("WeakMap.prototype.get",!0),xo=So("WeakMap.prototype.set",!0),Eo=So("WeakMap.prototype.has",!0),Io=So("Map.prototype.get",!0),Fo=So("Map.prototype.set",!0),ko=So("Map.prototype.has",!0),Mo=function(t,e){for(var r,n=t;null!==(r=n.next);n=r)if(r.key===e)return n.next=r.next,r.next=t.next,t.next=r,r},Uo=function(){var t,e,r,n={assert:function(t){if(!n.has(t))throw new Ao("Side channel does not contain "+wo(t))},get:function(n){if(jo&&n&&("object"==typeof n||"function"==typeof n)){if(t)return Po(t,n)}else if(Oo){if(e)return Io(e,n)}else if(r)return function(t,e){var r=Mo(t,e);return r&&r.value}(r,n)},has:function(n){if(jo&&n&&("object"==typeof n||"function"==typeof n)){if(t)return Eo(t,n)}else if(Oo){if(e)return ko(e,n)}else if(r)return function(t,e){return!!Mo(t,e)}(r,n);return!1},set:function(n,o){jo&&n&&("object"==typeof n||"function"==typeof n)?(t||(t=new jo),xo(t,n,o)):Oo?(e||(e=new Oo),Fo(e,n,o)):(r||(r={key:{},next:null}),function(t,e,r){var n=Mo(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}}(r,n,o))}};return n},_o=xt,Ro=Uo(),To=pt,No={assert:function(t,e){if(!t||"object"!=typeof t&&"function"!=typeof t)throw new To("`O` is not an object");if("string"!=typeof e)throw new To("`slot` must be a string");if(Ro.assert(t),!No.has(t,e))throw new To("`"+e+"` is not present on `O`")},get:function(t,e){if(!t||"object"!=typeof t&&"function"!=typeof t)throw new To("`O` is not an object");if("string"!=typeof e)throw new To("`slot` must be a string");var r=Ro.get(t);return r&&r["$"+e]},has:function(t,e){if(!t||"object"!=typeof t&&"function"!=typeof t)throw new To("`O` is not an object");if("string"!=typeof e)throw new To("`slot` must be a string");var r=Ro.get(t);return!!r&&_o(r,"$"+e)},set:function(t,e,r){if(!t||"object"!=typeof t&&"function"!=typeof t)throw new To("`O` is not an object");if("string"!=typeof e)throw new To("`slot` must be a string");var n=Ro.get(t);n||(n={},Ro.set(t,n)),n["$"+e]=r}};Object.freeze&&Object.freeze(No);var Co,Bo,Do,Wo,$o=No,Lo=SyntaxError,Go="object"==typeof StopIteration?StopIteration:null,Vo={}.toString,qo=Array.isArray||function(t){return"[object Array]"==Vo.call(t)};function zo(){if(Bo)return Co;Bo=1;var t=yt();return Co=function(){return t()&&!!Symbol.toStringTag}}function Ho(){if(Wo)return Do;Wo=1;var t=String.prototype.valueOf,e=Object.prototype.toString,r=zo()();return Do=function(n){return"string"==typeof n||"object"==typeof n&&(r?function(e){try{return t.call(e),!0}catch(t){return!1}}(n):"[object String]"===e.call(n))},Do}var Jo,Zo="function"==typeof Map&&Map.prototype?Map:null,Ko="function"==typeof Set&&Set.prototype?Set:null;Zo||(Jo=function(t){return!1});var Yo=Zo?Map.prototype.has:null,Xo=Ko?Set.prototype.has:null;Jo||Yo||(Jo=function(t){return!1});var Qo,ti=Jo||function(t){if(!t||"object"!=typeof t)return!1;try{if(Yo.call(t),Xo)try{Xo.call(t)}catch(t){return!0}return t instanceof Zo}catch(t){}return!1},ei="function"==typeof Map&&Map.prototype?Map:null,ri="function"==typeof Set&&Set.prototype?Set:null;ri||(Qo=function(t){return!1});var ni=ei?Map.prototype.has:null,oi=ri?Set.prototype.has:null;Qo||oi||(Qo=function(t){return!1});var ii=Qo||function(t){if(!t||"object"!=typeof t)return!1;try{if(oi.call(t),ni)try{ni.call(t)}catch(t){return!0}return t instanceof ri}catch(t){}return!1},ai=mn,ui=function(t){if(!Go)throw new Lo("this environment lacks StopIteration");$o.set(t,"[[Done]]",!1);var e={next:function(){var t=$o.get(this,"[[Iterator]]"),e=$o.get(t,"[[Done]]");try{return{done:e,value:e?void 0:t.next()}}catch(e){if($o.set(t,"[[Done]]",!0),e!==Go)throw e;return{done:!0,value:void 0}}}};return $o.set(e,"[[Iterator]]",t),e};if(bt()||yt()()){var li=Symbol.iterator;fn.exports=function(t){return null!=t&&void 0!==t[li]?t[li]():ai(t)?Array.prototype[li].call(t):void 0}}else{var ci=qo,pi=Ho(),fi=ir,yi=fi("%Map%",!0),si=fi("%Set%",!0),gi=br,di=gi("Array.prototype.push"),bi=gi("String.prototype.charCodeAt"),vi=gi("String.prototype.slice"),hi=function(t){var e=0;return{next:function(){var r,n=e>=t.length;return n||(r=t[e],e+=1),{done:n,value:r}}}},mi=function(t,e){if(ci(t)||ai(t))return hi(t);if(pi(t)){var r=0;return{next:function(){var e=function(t,e){if(e+1>=t.length)return e+1;var r=bi(t,e);if(r<55296||r>56319)return e+1;var n=bi(t,e+1);return n<56320||n>57343?e+1:e+2}(t,r),n=vi(t,r,e);return r=e,{done:e>t.length,value:n}}}}return e&&void 0!==t["_es6-shim iterator_"]?t["_es6-shim iterator_"]():void 0};if(yi||si){var Si=ti,wi=ii,Ai=gi("Map.prototype.forEach",!0),ji=gi("Set.prototype.forEach",!0);if("undefined"==typeof process||!process.versions||!process.versions.node)var Oi=gi("Map.prototype.iterator",!0),Pi=gi("Set.prototype.iterator",!0);var xi=gi("Map.prototype.@@iterator",!0)||gi("Map.prototype._es6-shim iterator_",!0),Ei=gi("Set.prototype.@@iterator",!0)||gi("Set.prototype._es6-shim iterator_",!0);fn.exports=function(t){return function(t){if(Si(t)){if(Oi)return ui(Oi(t));if(xi)return xi(t);if(Ai){var e=[];return Ai(t,(function(t,r){di(e,[r,t])})),hi(e)}}if(wi(t)){if(Pi)return ui(Pi(t));if(Ei)return Ei(t);if(ji){var r=[];return ji(t,(function(t){di(r,t)})),hi(r)}}}(t)||mi(t)}}else fn.exports=function(t){if(null!=t)return mi(t,!0)}}var Ii=function(t){return t!=t},Fi=function(t,e){return 0===t&&0===e?1/t==1/e:t===e||!(!Ii(t)||!Ii(e))},ki=Fi,Mi=function(){return"function"==typeof Object.is?Object.is:ki},Ui=Mi,_i=xe,Ri=xe,Ti=Fi,Ni=Mi,Ci=function(){var t=Ui();return _i(Object,{is:t},{is:function(){return Object.is!==t}}),t},Bi=(0,Ee.exports)(Ni(),Object);Ri(Bi,{getPolyfill:Ni,implementation:Ti,shim:Ci});var Di,Wi,$i=Bi,Li=Function.prototype.toString,Gi="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof Gi&&"function"==typeof Object.defineProperty)try{Di=Object.defineProperty({},"length",{get:function(){throw Wi}}),Wi={},Gi((function(){throw 42}),null,Di)}catch(t){t!==Wi&&(Gi=null)}else Gi=null;var Vi=/^\s*class\b/,qi=function(t){try{var e=Li.call(t);return Vi.test(e)}catch(t){return!1}},zi=function(t){try{return!qi(t)&&(Li.call(t),!0)}catch(t){return!1}},Hi=Object.prototype.toString,Ji="function"==typeof Symbol&&!!Symbol.toStringTag,Zi=!(0 in[,]),Ki=function(){return!1};if("object"==typeof document){var Yi=document.all;Hi.call(Yi)===Hi.call(document.all)&&(Ki=function(t){if((Zi||!t)&&(void 0===t||"object"==typeof t))try{var e=Hi.call(t);return("[object HTMLAllCollection]"===e||"[object HTML document.all class]"===e||"[object HTMLCollection]"===e||"[object Object]"===e)&&null==t("")}catch(t){}return!1})}var Xi=Gi?function(t){if(Ki(t))return!0;if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;try{Gi(t,null,Di)}catch(t){if(t!==Wi)return!1}return!qi(t)&&zi(t)}:function(t){if(Ki(t))return!0;if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if(Ji)return zi(t);if(qi(t))return!1;var e=Hi.call(t);return!("[object Function]"!==e&&"[object GeneratorFunction]"!==e&&!/^\[object HTML/.test(e))&&zi(t)},Qi=Xi,ta=Object.prototype.toString,ea=Object.prototype.hasOwnProperty,ra=function(t,e,r){if(!Qi(e))throw new TypeError("iterator must be a function");var n;arguments.length>=3&&(n=r),"[object Array]"===ta.call(t)?function(t,e,r){for(var n=0,o=t.length;n<o;n++)ea.call(t,n)&&(null==r?e(t[n],n,t):e.call(r,t[n],n,t))}(t,e,n):"string"==typeof t?function(t,e,r){for(var n=0,o=t.length;n<o;n++)null==r?e(t.charAt(n),n,t):e.call(r,t.charAt(n),n,t)}(t,e,n):function(t,e,r){for(var n in t)ea.call(t,n)&&(null==r?e(t[n],n,t):e.call(r,t[n],n,t))}(t,e,n)},na=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"],oa="undefined"==typeof globalThis?W:globalThis,ia={exports:{}},aa=oe,ua=se,la=be(),ca=le,pa=pt,fa=aa("%Math.floor%"),ya=function(t,e){if("function"!=typeof t)throw new pa("`fn` is not a function");if("number"!=typeof e||e<0||e>4294967295||fa(e)!==e)throw new pa("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],n=!0,o=!0;if("length"in t&&ca){var i=ca(t,"length");i&&!i.configurable&&(n=!1),i&&!i.writable&&(o=!1)}return(n||o||!r)&&(la?ua(t,"length",e,!0,!0):ua(t,"length",e)),t};!function(t){var e=jt,r=oe,n=ya,o=pt,i=r("%Function.prototype.apply%"),a=r("%Function.prototype.call%"),u=r("%Reflect.apply%",!0)||e.call(a,i),l=ae,c=r("%Math.max%");t.exports=function(t){if("function"!=typeof t)throw new o("a function is required");var r=u(e,a,arguments);return n(r,1+c(0,t.length-(arguments.length-1)),!0)};var p=function(){return u(e,i,arguments)};l?l(t.exports,"apply",{value:p}):t.exports.apply=p}(ia);var sa=oe,ga=ia.exports,da=ga(sa("String.prototype.indexOf")),ba=function(t,e){var r=sa(t,!!e);return"function"==typeof r&&da(t,".prototype.")>-1?ga(r):r},va=ra,ha=function(){for(var t=[],e=0;e<na.length;e++)"function"==typeof oa[na[e]]&&(t[t.length]=na[e]);return t},ma=ia.exports,Sa=ba,wa=le,Aa=Sa("Object.prototype.toString"),ja=zo()(),Oa="undefined"==typeof globalThis?W:globalThis,Pa=ha(),xa=Sa("String.prototype.slice"),Ea=Object.getPrototypeOf,Ia=Sa("Array.prototype.indexOf",!0)||function(t,e){for(var r=0;r<t.length;r+=1)if(t[r]===e)return r;return-1},Fa={__proto__:null};va(Pa,ja&&wa&&Ea?function(t){var e=new Oa[t];if(Symbol.toStringTag in e){var r=Ea(e),n=wa(r,Symbol.toStringTag);if(!n){var o=Ea(r);n=wa(o,Symbol.toStringTag)}Fa["$"+t]=ma(n.get)}}:function(t){var e=new Oa[t],r=e.slice||e.set;r&&(Fa["$"+t]=ma(r))});var ka,Ma,Ua,_a,Ra=function(t){if(!t||"object"!=typeof t)return!1;if(!ja){var e=xa(Aa(t),8,-1);return Ia(Pa,e)>-1?e:"Object"===e&&function(t){var e=!1;return va(Fa,(function(r,n){if(!e)try{r(t),e=xa(n,1)}catch(t){}})),e}(t)}return wa?function(t){var e=!1;return va(Fa,(function(r,n){if(!e)try{"$"+r(t)===n&&(e=xa(n,1))}catch(t){}})),e}(t):null},Ta=Ee.exports,Na=br,Ca=ir,Ba=function(t){return!!Ra(t)},Da=Ca("ArrayBuffer",!0),Wa=Ca("Float32Array",!0),$a=Na("ArrayBuffer.prototype.byteLength",!0),La=Da&&!$a&&(new Da).slice,Ga=La&&Ta(La),Va=$a||Ga?function(t){if(!t||"object"!=typeof t)return!1;try{return $a?$a(t):Ga(t,0),!0}catch(t){return!1}}:Wa?function(t){try{return new Wa(t).buffer===t&&!Ba(t)}catch(e){return"object"==typeof t&&"RangeError"===e.name}}:function(t){return!1},qa=Date.prototype.getDay,za=Object.prototype.toString,Ha=sn(),Ja=br,Za=sn();if(Za){ka=Ja("Object.prototype.hasOwnProperty"),Ma=Ja("RegExp.prototype.exec"),Ua={};var Ka=function(){throw Ua};_a={toString:Ka,valueOf:Ka},"symbol"==typeof Symbol.toPrimitive&&(_a[Symbol.toPrimitive]=Ka)}var Ya=Ja("Object.prototype.toString"),Xa=Object.getOwnPropertyDescriptor,Qa=Za?function(t){if(!t||"object"!=typeof t)return!1;var e=Xa(t,"lastIndex");if(!(e&&ka(e,"value")))return!1;try{Ma(t,_a)}catch(t){return t===Ua}}:function(t){return!(!t||"object"!=typeof t&&"function"!=typeof t)&&"[object RegExp]"===Ya(t)},tu=br("SharedArrayBuffer.prototype.byteLength",!0),eu=tu?function(t){if(!t||"object"!=typeof t)return!1;try{return tu(t),!0}catch(t){return!1}}:function(t){return!1},ru=Number.prototype.toString,nu=Object.prototype.toString,ou=zo()(),iu=ba,au=iu("Boolean.prototype.toString"),uu=iu("Object.prototype.toString"),lu=zo()(),cu={exports:{}},pu=Object.prototype.toString;if(bt()){var fu=Symbol.prototype.toString,yu=/^Symbol\(.*\)$/;cu.exports=function(t){if("symbol"==typeof t)return!0;if("[object Symbol]"!==pu.call(t))return!1;try{return function(t){return"symbol"==typeof t.valueOf()&&yu.test(fu.call(t))}(t)}catch(t){return!1}}}else cu.exports=function(t){return!1};var su={exports:{}},gu="undefined"!=typeof BigInt&&BigInt;if("function"==typeof gu&&"function"==typeof BigInt&&"bigint"==typeof gu(42)&&"bigint"==typeof BigInt(42)){var du=BigInt.prototype.valueOf;su.exports=function(t){return null!=t&&"boolean"!=typeof t&&"string"!=typeof t&&"number"!=typeof t&&"symbol"!=typeof t&&"function"!=typeof t&&("bigint"==typeof t||function(t){try{return du.call(t),!0}catch(t){}return!1}(t))}}else su.exports=function(t){return!1};var bu,vu=Ho(),hu=function(t){return"number"==typeof t||"object"==typeof t&&(ou?function(t){try{return ru.call(t),!0}catch(t){return!1}}(t):"[object Number]"===nu.call(t))},mu=function(t){return"boolean"==typeof t||null!==t&&"object"==typeof t&&(lu&&Symbol.toStringTag in t?function(t){try{return au(t),!0}catch(t){return!1}}(t):"[object Boolean]"===uu(t))},Su=cu.exports,wu=su.exports,Au="function"==typeof WeakMap&&WeakMap.prototype?WeakMap:null,ju="function"==typeof WeakSet&&WeakSet.prototype?WeakSet:null;Au||(bu=function(t){return!1});var Ou=Au?Au.prototype.has:null,Pu=ju?ju.prototype.has:null;bu||Ou||(bu=function(t){return!1});var xu=bu||function(t){if(!t||"object"!=typeof t)return!1;try{if(Ou.call(t,Ou),Pu)try{Pu.call(t,Pu)}catch(t){return!0}return t instanceof Au}catch(t){}return!1},Eu={exports:{}},Iu=ba,Fu=oe("%WeakSet%",!0),ku=Iu("WeakSet.prototype.has",!0);if(ku){var Mu=Iu("WeakMap.prototype.has",!0);Eu.exports=function(t){if(!t||"object"!=typeof t)return!1;try{if(ku(t,ku),Mu)try{Mu(t,Mu)}catch(t){return!0}return t instanceof Fu}catch(t){}return!1}}else Eu.exports=function(t){return!1};var Uu=ti,_u=ii,Ru=xu,Tu=Eu.exports,Nu=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],Cu="undefined"==typeof globalThis?W:globalThis,Bu=ra,Du=function(){for(var t=[],e=0;e<Nu.length;e++)"function"==typeof Cu[Nu[e]]&&(t[t.length]=Nu[e]);return t},Wu=Ee.exports,$u=br,Lu=le,Gu=$u("Object.prototype.toString"),Vu=sn(),qu="undefined"==typeof globalThis?W:globalThis,zu=Du(),Hu=$u("String.prototype.slice"),Ju=Object.getPrototypeOf,Zu=$u("Array.prototype.indexOf",!0)||function(t,e){for(var r=0;r<t.length;r+=1)if(t[r]===e)return r;return-1},Ku={__proto__:null};Bu(zu,Vu&&Lu&&Ju?function(t){var e=new qu[t];if(Symbol.toStringTag in e){var r=Ju(e),n=Lu(r,Symbol.toStringTag);if(!n){var o=Ju(r);n=Lu(o,Symbol.toStringTag)}Ku["$"+t]=Wu(n.get)}}:function(t){var e=new qu[t],r=e.slice||e.set;r&&(Ku["$"+t]=Wu(r))});var Yu=br("ArrayBuffer.prototype.byteLength",!0),Xu=Va,Qu=Tr,tl=br,el=pn,rl=ir,nl=fn.exports,ol=Uo,il=$i,al=mn,ul=qo,ll=Va,cl=function(t){return"object"==typeof t&&null!==t&&(Ha?function(t){try{return qa.call(t),!0}catch(t){return!1}}(t):"[object Date]"===za.call(t))},pl=Qa,fl=eu,yl=ot,sl=function(t){return null==t||"object"!=typeof t&&"function"!=typeof t?null:vu(t)?"String":hu(t)?"Number":mu(t)?"Boolean":Su(t)?"Symbol":wu(t)?"BigInt":void 0},gl=function(t){if(t&&"object"==typeof t){if(Uu(t))return"Map";if(_u(t))return"Set";if(Ru(t))return"WeakMap";if(Tu(t))return"WeakSet"}return!1},dl=function(t){if(!t||"object"!=typeof t)return!1;if(!Vu){var e=Hu(Gu(t),8,-1);return Zu(zu,e)>-1?e:"Object"===e&&function(t){var e=!1;return Bu(Ku,(function(r,n){if(!e)try{r(t),e=Hu(n,1)}catch(t){}})),e}(t)}return Lu?function(t){var e=!1;return Bu(Ku,(function(r,n){if(!e)try{"$"+r(t)===n&&(e=Hu(n,1))}catch(t){}})),e}(t):null},bl=function(t){return Xu(t)?Yu?Yu(t):t.byteLength:NaN},vl=tl("SharedArrayBuffer.prototype.byteLength",!0),hl=tl("Date.prototype.getTime"),ml=Object.getPrototypeOf,Sl=tl("Object.prototype.toString"),wl=rl("%Set%",!0),Al=tl("Map.prototype.has",!0),jl=tl("Map.prototype.get",!0),Ol=tl("Map.prototype.size",!0),Pl=tl("Set.prototype.add",!0),xl=tl("Set.prototype.delete",!0),El=tl("Set.prototype.has",!0),Il=tl("Set.prototype.size",!0);function Fl(t,e,r,n){for(var o,i=nl(t);(o=i.next())&&!o.done;)if(Rl(e,o.value,r,n))return xl(t,o.value),!0;return!1}function kl(t){return void 0===t?null:"object"!=typeof t?"symbol"!=typeof t&&("string"!=typeof t&&"number"!=typeof t||+t==+t):void 0}function Ml(t,e,r,n,o,i){var a=kl(r);if(null!=a)return a;var u=jl(e,a),l=Qu({},o,{strict:!1});return!(void 0===u&&!Al(e,a)||!Rl(n,u,l,i))&&(!Al(t,a)&&Rl(n,u,l,i))}function Ul(t,e,r){var n=kl(r);return null!=n?n:El(e,n)&&!El(t,n)}function _l(t,e,r,n,o,i){for(var a,u,l=nl(t);(a=l.next())&&!a.done;)if(Rl(r,u=a.value,o,i)&&Rl(n,jl(e,u),o,i))return xl(t,u),!0;return!1}function Rl(t,e,r,n){var o=r||{};if(o.strict?il(t,e):t===e)return!0;if(sl(t)!==sl(e))return!1;if(!t||!e||"object"!=typeof t&&"object"!=typeof e)return o.strict?il(t,e):t==e;var i,a=n.has(t),u=n.has(e);if(a&&u){if(n.get(t)===n.get(e))return!0}else i={};return a||n.set(t,i),u||n.set(e,i),function(t,e,r,n){var o,i;if(typeof t!=typeof e)return!1;if(null==t||null==e)return!1;if(Sl(t)!==Sl(e))return!1;if(al(t)!==al(e))return!1;var a=ul(t),u=ul(e);if(a!==u)return!1;var l=t instanceof Error,c=e instanceof Error;if(l!==c)return!1;if((l||c)&&(t.name!==e.name||t.message!==e.message))return!1;var p=pl(t),f=pl(e);if(p!==f)return!1;if((p||f)&&(t.source!==e.source||el(t)!==el(e)))return!1;var y=cl(t),s=cl(e);if(y!==s)return!1;if((y||s)&&hl(t)!==hl(e))return!1;if(r.strict&&ml&&ml(t)!==ml(e))return!1;var g=dl(t),d=dl(e);if(g!==d)return!1;if(g||d){if(t.length!==e.length)return!1;for(o=0;o<t.length;o++)if(t[o]!==e[o])return!1;return!0}var b=Tl(t),v=Tl(e);if(b!==v)return!1;if(b||v){if(t.length!==e.length)return!1;for(o=0;o<t.length;o++)if(t[o]!==e[o])return!1;return!0}var h=ll(t),m=ll(e);if(h!==m)return!1;if(h||m)return bl(t)===bl(e)&&("function"==typeof Uint8Array&&Rl(new Uint8Array(t),new Uint8Array(e),r,n));var S=fl(t),w=fl(e);if(S!==w)return!1;if(S||w)return vl(t)===vl(e)&&("function"==typeof Uint8Array&&Rl(new Uint8Array(t),new Uint8Array(e),r,n));if(typeof t!=typeof e)return!1;var A=yl(t),j=yl(e);if(A.length!==j.length)return!1;for(A.sort(),j.sort(),o=A.length-1;o>=0;o--)if(A[o]!=j[o])return!1;for(o=A.length-1;o>=0;o--)if(!Rl(t[i=A[o]],e[i],r,n))return!1;var O=gl(t),P=gl(e);if(O!==P)return!1;if("Set"===O||"Set"===P)return function(t,e,r,n){if(Il(t)!==Il(e))return!1;var o,i,a,u=nl(t),l=nl(e);for(;(o=u.next())&&!o.done;)if(o.value&&"object"==typeof o.value)a||(a=new wl),Pl(a,o.value);else if(!El(e,o.value)){if(r.strict)return!1;if(!Ul(t,e,o.value))return!1;a||(a=new wl),Pl(a,o.value)}if(a){for(;(i=l.next())&&!i.done;)if(i.value&&"object"==typeof i.value){if(!Fl(a,i.value,r.strict,n))return!1}else if(!r.strict&&!El(t,i.value)&&!Fl(a,i.value,r.strict,n))return!1;return 0===Il(a)}return!0}(t,e,r,n);if("Map"===O)return function(t,e,r,n){if(Ol(t)!==Ol(e))return!1;var o,i,a,u,l,c,p=nl(t),f=nl(e);for(;(o=p.next())&&!o.done;)if(u=o.value[0],l=o.value[1],u&&"object"==typeof u)a||(a=new wl),Pl(a,u);else if(void 0===(c=jl(e,u))&&!Al(e,u)||!Rl(l,c,r,n)){if(r.strict)return!1;if(!Ml(t,e,u,l,r,n))return!1;a||(a=new wl),Pl(a,u)}if(a){for(;(i=f.next())&&!i.done;)if(u=i.value[0],c=i.value[1],u&&"object"==typeof u){if(!_l(a,t,u,c,r,n))return!1}else if(!(r.strict||t.has(u)&&Rl(jl(t,u),c,r,n)||_l(a,t,u,c,Qu({},r,{strict:!1}),n)))return!1;return 0===Il(a)}return!0}(t,e,r,n);return!0}(t,e,o,n)}function Tl(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&("function"==typeof t.copy&&"function"==typeof t.slice&&(!(t.length>0&&"number"!=typeof t[0])&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))))}var Nl=function(t,e,r){return Rl(t,e,r,ol())};const Cl="__EMPTY_VALUE__";function Bl(t,e){a((()=>{const{current:r}=Array.isArray(t)?t[0]:t;if(!r)return;const n=r.ownerDocument,o=function(t,e){const r=Array.isArray(t)?t:[t];return t=>{r.every((e=>{let{current:r}=e;return r&&!r.contains(t.target)}))&&e()}}(t,e);return n.addEventListener("mousedown",o),n.addEventListener("touchstart",o),()=>{n.removeEventListener("mousedown",o),n.removeEventListener("touchstart",o)}}),[t,e])}function Dl(t,e){const[n,o]=r(),i=l((()=>{o((e=>{const r=null==t?void 0:t.getBoundingClientRect();return o=r,(n=e)&&o&&n.height===o.height&&n.width===o.width&&n.bottom===o.bottom&&n.top===o.top&&n.left===o.left&&n.right===o.right?e:r;var n,o}))}),[t]);var u;return a((()=>u?function(t){let e;const r=()=>{e=window.requestAnimationFrame((()=>{t(),r()}))},n=()=>window.cancelAnimationFrame(e);return r(),n}(u):void 0),[u=e?i:void 0]),n}function Wl(){}const $l=c(((t,e)=>{const{footer:r,id:n,options:i,multiSelect:a,onContentScroll:u,selected:l,onOptionClick:c,onBlur:f,position:y,width:s}=t,g=i.length>0,d=function(t){return e=>t.includes(e)}(l),b=g?o("ul",{id:"".concat(n,"-dropdown-list"),className:"dropdown-list dropdown-content-section",role:"menu",onScroll:u,"data-focusindex":0,style:{position:"fixed",width:s,top:null==y?void 0:y.bottom,left:null==y?void 0:y.left}},i.map(((t,e)=>o("li",{className:V({"filter-selected":!a&&d(t.value)}),key:"val:".concat(t.value),onClick:e=>{e.preventDefault(),e.stopPropagation(),c(t)},onKeyDown:r=>{"Enter"===r.key||" "===r.key?(r.preventDefault(),r.stopPropagation(),c(t)):("Tab"===r.key&&(e+1===i.length||r.shiftKey&&0===e)||"Escape"===r.key)&&(r.preventDefault(),f())},title:t.caption,role:"menuitem",tabIndex:0},a?o(p,null,o("input",{id:"".concat(n,"_checkbox_toggle_").concat(e),type:"checkbox",checked:d(t.value),onChange:Wl}),o("label",{htmlFor:"".concat(n,"_checkbox_toggle_").concat(e),style:{pointerEvents:"none"}},t.caption)):o("div",{className:"filter-label"},t.caption))))):null;return o("div",{className:"dropdown-content",ref:e},b,r)}));function Ll(t){const{ariaLabel:e,status:r,id:n,inputValue:i,placeholder:a,onContainerClick:u,show:l}=t;return r||o("input",{value:i,placeholder:a,className:"form-control dropdown-triggerer",onClick:u,onChange:Wl,onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),t.stopPropagation(),u&&u())},"aria-haspopup":!0,"aria-expanded":l,"aria-controls":"".concat(n,"-dropdown-list"),"aria-label":e})}function Gl(t){var e;const{ariaLabel:n,className:a,status:u,footer:c,id:p,options:f,selected:y,inputValue:s,placeholder:g,multiSelect:d,tabIndex:b,styles:v,onSelect:h,onTriggerClick:m,onContentScroll:S}=t,[w,A]=r(!1),j=i(null),O=i(null),P=Dl(j.current||null,w),x=l((t=>{h(t.value),d||A(!1)}),[h,d]);Bl([j,O],(()=>A(!1)));const E=l((()=>{var t,e;A(!1),null===(e=null===(t=j.current)||void 0===t?void 0:t.querySelector("input"))||void 0===e||e.focus()}),[A]),I=l((()=>{A((t=>!t)),setTimeout((()=>{var t,e;null===(e=null===(t=O.current)||void 0===t?void 0:t.querySelector('[role="menuitem"]'))||void 0===e||e.focus()}),10),m&&m()}),[m]);return o("div",{className:V("dropdown-container",a),"data-focusindex":null!=b?b:0,ref:j,style:v},o(Ll,{ariaLabel:n,status:u,id:p,inputValue:s,placeholder:g,show:w,onContainerClick:I}),w?o($l,{position:P,footer:c,id:p,options:f,multiSelect:d,onContentScroll:S,selected:y,onOptionClick:x,onBlur:E,ref:O,width:null===(e=j.current)||void 0===e?void 0:e.clientWidth}):null)}const Vl=Object.freeze({reset:{value:"reset.value",filters:"reset.filters"}});function ql(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}let zl=()=>({emit(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];for(let e=0,n=this.events[t]||[],o=n.length;e<o;e++)n[e](...r)},events:{},on(t,e){var r;return((r=this.events)[t]||(r[t]=[])).push(e),()=>{var r;this.events[t]=null===(r=this.events[t])||void 0===r?void 0:r.filter((t=>e!==t))}}});const Hl="com.mendix.widgets.web.plugin.externalEvents";class Jl{constructor(){ql(this,"channels",void 0),ql(this,"id",Math.random().toString().slice(2)),this.channels=new Map}disposeChannel(t){const e=this.channels.get(t);return e&&(e.events={}),this.channels.delete(t)}getChannel(t){let e=this.channels.get(t);return e||(e=zl(),this.channels.set(t,e),e)}emit(t,e){for(var r,n=arguments.length,o=new Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];null===(r=this.channels.get(t))||void 0===r||r.emit(e,...o)}subscribe(t,e,r){return this.getChannel(t).on(e,r),()=>this.unsubscribe(t,e,r)}unsubscribe(t,e,r){const n=this.channels.get(t);if(!n)return;const o=n.events[e];o&&(n.events[e]=o.filter((t=>t!==r)));0===Object.values(n.events).flat().reduce(((t,e)=>e?t+1:t),0)&&this.disposeChannel(t)}}function Zl(){var t,e;return null!==(e=(t=window)[Hl])&&void 0!==e?e:t[Hl]=function(){if(Object.prototype.hasOwnProperty.call(window,Hl))throw new Error("Widget plugin external events: plugin already initialized!");return new Jl}()}function Kl(t,e,r){a((()=>{if(void 0!==t)return Zl().subscribe(t,e,r)}),[t,e])}function Yl(t){var e,n;const c=!!t.multiSelect,p=function(t,e){var r;return e.multiSelect?t:[{caption:null!==(r=e.emptyOptionCaption)&&void 0!==r?r:"",value:Cl},...t]}(t.options,{multiSelect:c,emptyOptionCaption:t.emptyOptionCaption}),[f,{toggle:y,setSelected:s,reset:g}]=function(t,e){const[n,o]=r((()=>new Set(e))),i=u((()=>({setSelected:t=>o((e=>{const r=new Set(t);return Nl(e,r)?e:r})),toggle:t=>o((e=>(e.has(t)?e.delete(t):e.add(t),new Set(e)))),reset:()=>o(new Set)})),[]),a=function(t,e){return e.filter((e=>t.has(e.value))).map((t=>{let{caption:e}=t;return e})).join(",")}(n,t);return[u((()=>({inputValue:a,selected:[...n.values()]})),[n,a]),i]}(p,(null!==(e=t.initialSelected)&&void 0!==e?e:"").split(",").filter((t=>""!==t)));const d=l((t=>{c?y(t):s(t===Cl?[]:[t])}),[]);return function(t,e,r){a((()=>null==t?void 0:t(e.filter((t=>r.includes(t.value))))),[])}(t.updateFilters,p,f.selected),function(t,e){const r=i(void 0);a((()=>{void 0!==r.current&&t(r.current,e),r.current=e}),e)}(((e,r)=>{let[n]=r;var o;null===(o=t.updateFilters)||void 0===o||o.call(t,n.length>0?p.filter((t=>n.includes(t.value))):[])}),[f.selected]),function(t){let{widgetName:e,parentChannelName:r,listener:n}=t;const{current:o}=i(n);Kl(e,Vl.reset.value,o),Kl(r,Vl.reset.value,o)}({widgetName:t.name,parentChannelName:null!==(n=t.parentChannelName)&&void 0!==n?n:void 0,listener:g}),o(Gl,{ariaLabel:t.ariaLabel,className:t.className,footer:t.footer,id:t.id,inputValue:f.inputValue,multiSelect:c,onSelect:d,options:p,selected:f.selected,status:t.status,styles:t.styles,tabIndex:t.tabIndex,placeholder:t.emptyOptionCaption,onContentScroll:t.onContentScroll,onTriggerClick:t.onTriggerClick})}function Xl(t){const e=P(),r=D(t.context,t.widgetProps);return r.hasError?o(z,{error:r.error}):o(Yl,{...r.value,id:e})}function Ql(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e}const tc=(t,e,r)=>{t((t=>"available"===e.status&&e.hasMoreItems?t+r:t))};function ec(t){const[e,r]=u((()=>function(t,e){let r=0,n=0;return[function(){for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];const u=(new Date).getTime()-n,l=()=>{r=0,n=(new Date).getTime(),t(...i)};r||(u>=e?l():r=window.setTimeout(l,e-u))},()=>{clearTimeout(r),r=0}]}(tc,t)),[t]);return a((()=>r),[r]),e}function rc(t,e){return s(d(t.id),g(e))}function nc(t,e){const r=e.length?g(e.slice()):b();return v(d(t.id),r)}function oc(t,e,r,n){return o=>{const i=function(t,e){var r;return(""===(null===(r=e[0])||void 0===r?void 0:r.value)?[]:e).map((e=>t[e.value]))}(r,o);t({getFilterCondition(){if(!(i.length<1))return"Reference"===e.type?function(t,e){const r=e.map((e=>rc(t,e)));return r.length>1?f(...r):r[0]}(e,i):function(t,e){const r=e.map((e=>nc(t,[e])));return r.length>1?f(...r):r[0]}(e,i)}}),n&&n.execute()}}function ic(){return o("div",{className:"form-control text-normal disabled"},"Not filterable")}function ac(t){const{loading:e}=t;return e?o("div",{className:"dropdown-footer dropdown-content-section"},o("div",{className:"dropdown-footer-item"},o("div",{className:"dropdown-loading"},"Loading..."))):null}function uc(t){let{dispatch:e,widgetProps:r,associationProps:n,eventsChannelName:u}=t;var c,p;const{association:f,optionsSource:y,getOptionLabel:s}=n,g=P(),d=f.filterable,[b,v,h]=function(t){var e;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;const o=i(0),u="loading"===t.status,l=0!==o.current,c=e=>{const r=e(o.current);o.current=r,t.limit!==r&&t.setLimit(r)},p=ec(n);return a((()=>c((()=>0))),[]),Ql((()=>c((t=>0===t?r:t))),(()=>p(c,t,r)),{isFetched:l,isLoading:u,hasMore:!!t.hasMoreItems,items:null!==(e=t.items)&&void 0!==e?e:[]})}(y),m=d?h.items:[],[S,w]=function(t,e){return Ql(t.map((t=>({value:t.id,caption:e(t)}))),Object.fromEntries(t.map((t=>[t.id,t]))))}(m,s),A=oc(e,f,w),j=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{triggerZoneHeight:r=0}=e,n=i({callback:t,offset:Math.max(r,0),isInDeadZone:!1});return n.current.callback=t,l((t=>{const{current:{isInDeadZone:e,callback:r,offset:o}}=n,i=t.currentTarget.scrollHeight-o,a=Math.floor(i-t.currentTarget.scrollTop)<=Math.floor(t.currentTarget.clientHeight),u=!e&&a;n.current.isInDeadZone=a,u&&r(t)}),[])}(v,{triggerZoneHeight:100});return o(Yl,{name:r.name,parentChannelName:u,id:g,updateFilters:A,options:S,ariaLabel:null===(c=r.ariaLabel)||void 0===c?void 0:c.value,className:r.class,emptyOptionCaption:null===(p=r.emptyOptionCaption)||void 0===p?void 0:p.value,multiSelect:r.multiSelect,styles:r.style,tabIndex:r.tabIndex,status:d?void 0:o(ic,null),footer:o(ac,{loading:h.isLoading}),onTriggerClick:b,onContentScroll:h.hasMore?j:void 0})}function lc(t){let{context:e,widgetProps:r}=t;var n;const i=null==(a=e).associationProperties?S(new m("referenceProperties is undefined")):w(a.associationProperties);var a;return i.hasError?o(z,{error:i.error}):o(uc,{widgetProps:r,associationProps:i.value,dispatch:e.filterDispatcher,eventsChannelName:null!==(n=e.eventsChannelName)&&void 0!==n?n:null})}function cc(t){var e;const r=O();if(r.hasError)return o(z,{error:new x});if("loading"===(null===(e=t.defaultValue)||void 0===e?void 0:e.status))return o(p,null);const n=r.value.associationProperties?lc:Xl;return o(n,{context:r.value,widgetProps:t})}export{cc as default};
